DROP DATABASE IF EXISTS RESTAURANT;
CREATE DATABASE Restaurant;

CREATE TABLE EMPLOYEE_T 
(
 EMPLOYEEID 	INT NOT NULL,
 Name			VARCHAR(25),
 Position		VARCHAR(10),
 DOB			DATE,
 StartDate		DATE,
 PhoneNumber	VARCHAR(15),

CONSTRAINT EMPLOYEE_PK PRIMARY KEY(EMPLOYEEID)
);

CREATE TABLE CUSTOMER_T  
(
 CustomerID		INT(7)	    NOT NULL,
 CNAME			VARCHAR(35) NOT NULL,
 PartySize		INT(2),
 Reservation		DATE,
 CONSTRAINT TABLE_PK PRIMARY KEY(CustomerID)
);

CREATE TABLE CHEF_T 
(
 ChefID				INT(4) NOT NULL,
 Name				VARCHAR(30),
 Speciality			VARCHAR(20),
CONSTRAINT CHEF_PK PRIMARY KEY(ChefID)
);

CREATE TABLE MENU_T 
(
 MenuID				INT(4) NOT NULL,
 ChefID				INT(4),
 SupplyNeeded			INT(2),
 Price 				Decimal(10,2),
 Name				VARCHAR(30),
CONSTRAINT MENU_PK PRIMARY KEY(MenuID),
CONSTRAINT MENU_FK FOREIGN KEY(ChefID) REFERENCES chef_t(ChefID)
);

CREATE TABLE ORDER_T 
(
 OrderID			INT(7) NOT NULL,
 EmployeeID			INT(4) NOT NULL,
 CustomerID			INT(7) NOT NULL,
 ChefID				INT(4) NOT NULL,
 MenuID				INT(2) NOT NULL,
 OrderQty			INT(2) NOT NULL,
 CONSTRAINT ORDER_PK PRIMARY KEY(OrderID,MenuID),
 CONSTRAINT ORDER_FK_1 FOREIGN KEY(EmployeeID) REFERENCES employee_t(EmployeeID),
 CONSTRAINT ORDER_FK_2 FOREIGN KEY(CustomerID) REFERENCES customer_t(CustomerID),
 CONSTRAINT ORDER_FK_3 FOREIGN KEY(ChefID) REFERENCES chef_t(ChefID),
 CONSTRAINT ORDER_FK_4 FOREIGN KEY(MenuID) REFERENCES menu_t(MenuID)
);

CREATE TABLE RESOURCE_T 
(
 MenuID				INT(4) NOT NULL,
 ProductID			INT(4) NOT NULL,
 OrderQuantity			INT(2),
CONSTRAINT RESOURCE_PK PRIMARY KEY(ProductID,MenuID)
);

CREATE TABLE SUPPLIER_T 
(
 CompanyName 		VARCHAR(99) NOT NULL,
 CompanyID		INT(4) NOT NULL,
 TypeOfSupply		VARCHAR(30),
 SupplierAddress	VARCHAR(99),
CONSTRAINT SUPPLIER_PK PRIMARY KEY(CompanyID)
);

CREATE TABLE INVENTORY_T 
(
 ProductID			INT(4) NOT NULL,
 CompanyID			INT(4) NOT NULL,
 ProductName			VARCHAR(25),
 CompanyName			VARCHAR(99) NOT NULL,
 Inventory_Type			CHAR(1),
 CONSTRAINT INVENTORY_PK PRIMARY KEY(ProductID),
 CONSTRAINT INVENTORY_FK FOREIGN KEY(CompanyID) REFERENCES supplier_t(CompanyID)
);

CREATE TABLE SERVICE_T 
(
 ServiceID			INT(7) NOT NULL,
 OrderID			INT(7) NOT NULL,
 Date				DATE,
 ServiceType		CHAR(8),
 PaymentAmount		Decimal(10,2),
 PaymentType		VARCHAR(20),
CONSTRAINT SERVICE_PK PRIMARY KEY(ServiceID),
CONSTRAINT SERVICE_FK FOREIGN KEY(OrderID) REFERENCES order_t(OrderID)
);

CREATE TABLE DINE_IN_T 
(
 DineID				INT(7) NOT NULL,
 TableID			INT(2) NOT NULL,
CONSTRAINT Dine_In_PK PRIMARY KEY(DineID),
CONSTRAINT Dine_In_FK FOREIGN KEY(DineID) REFERENCES Service_T(ServiceID)
);


CREATE TABLE Delivery_T 
(
 DeliveryID					INT(7) NOT NULL,
 DeliveryAddress				VARCHAR(99) NOT NULL,
CONSTRAINT Delivery_PK PRIMARY KEY(DeliveryID),
CONSTRAINT Delivery_FK FOREIGN KEY(DeliveryID) REFERENCES Service_T(ServiceID)
);

CREATE TABLE Take_Out_T 
(
 TakeOutID					INT(7) NOT NULL,
 OrderTime					TIME,
CONSTRAINT Take_Out_PK PRIMARY KEY(TakeOutID),
CONSTRAINT Take_Out_FK FOREIGN KEY(TakeOutID) REFERENCES Service_T(ServiceID)
);